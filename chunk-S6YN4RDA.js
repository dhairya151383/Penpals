import{D as l,G as d,ac as o,bc as p,cc as r,ec as f,fc as D,gc as m,jc as h,kc as c,mc as n,nc as A,oc as y,uc as b}from"./chunk-NOMZ4WY3.js";import{a as u,h as a}from"./chunk-MG3ERZGY.js";var v=class s{constructor(e){this.firebase=e}get articlesRef(){return p(this.firebase.firestore,"articles")}convertArticleDates(e){let i=e.data?e.data():e,t=u({id:e.id},i);return t.publishDate instanceof o?t.publishDate=t.publishDate.toDate():typeof t.publishDate=="string"?t.publishDate=new Date(t.publishDate):(t.publishDate===null||t.publishDate===void 0)&&(t.publishDate=null),t.updatedAt instanceof o?t.updatedAt=t.updatedAt.toDate():typeof t.updatedAt=="string"&&(t.updatedAt=new Date(t.updatedAt)),t}getAll(){return a(this,null,function*(){return(yield c(this.articlesRef)).docs.map(i=>this.convertArticleDates(i))})}getById(e){return a(this,null,function*(){let i=r(this.articlesRef,e),t=yield h(i);return t.exists()?this.convertArticleDates(t):null})}create(e){return a(this,null,function*(){let i=yield y(this.articlesRef,e);return yield n(i,{id:i.id}),i.id})}update(e,i){return a(this,null,function*(){let t=r(this.articlesRef,e);yield n(t,i)})}delete(e){return a(this,null,function*(){let i=r(this.articlesRef,e);yield A(i)})}getByAuthorId(e){return a(this,null,function*(){let i=f(this.articlesRef,D("authorId","==",e),m("publishDate","desc"));return(yield c(i)).docs.map(g=>this.convertArticleDates(g))})}static \u0275fac=function(i){return new(i||s)(d(b))};static \u0275prov=l({token:s,factory:s.\u0275fac,providedIn:"root"})};export{v as a};
