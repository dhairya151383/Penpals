import{a as V}from"./chunk-THAV5HDO.js";import{a as H}from"./chunk-IWDVFKXM.js";import{c as F,f as N,h as D,l as j,m as B,n as W,q as z}from"./chunk-UL765BIR.js";import{Ca as _,Da as g,Ea as c,Gb as k,Ia as S,Ib as E,O as m,Oa as d,P as u,Pa as x,Sa as v,Ta as C,Ua as w,Xa as T,ba as A,ca as M,ea as a,ha as O,ia as b,na as f,pb as L,qa as s,qb as P,vb as I,wa as o,xa as l,ya as h}from"./chunk-NOMZ4WY3.js";import{h as y}from"./chunk-MG3ERZGY.js";var Y=e=>["/author",e];function q(e,i){e&1&&h(0,"app-loading-spinner")}function G(e,i){if(e&1){let t=_();o(0,"div",16)(1,"p"),d(2),l(),o(3,"button",17),g("click",function(){m(t);let n=c(2);return u(n.ngOnInit())}),d(4,"Retry Loading"),l()()}if(e&2){let t=c(2);a(2),x(t.error)}}function J(e,i){e&1&&(o(0,"div",18)(1,"p"),d(2,"No authors found matching your criteria."),l()())}function K(e,i){if(e&1&&h(0,"img",26),e&2){let t=c().$implicit;S("alt","",t.name,"'s avatar"),s("src",t.avatarUrl,M)}}function Q(e,i){e&1&&h(0,"img",27)}function X(e,i){if(e&1&&h(0,"div",28),e&2){let t=c().$implicit,r=c(2);s("innerHTML",r.getTruncatedBio(t.bio),A)}}function $(e,i){if(e&1&&(o(0,"div",19)(1,"div",20),f(2,K,1,3,"img",21)(3,Q,1,0,"img",22),o(4,"div",23)(5,"a",24),d(6),l(),f(7,X,1,1,"div",25),l()()()),e&2){let t=i.$implicit;a(2),s("ngIf",t.avatarUrl),a(),s("ngIf",!t.avatarUrl),a(2),s("routerLink",T(5,Y,t.id)),a(),x(t.name),a(),s("ngIf",t.bio)}}function tt(e,i){if(e&1){let t=_();o(0,"div",2)(1,"h2"),d(2,"All Authors"),l(),f(3,G,5,1,"div",3),o(4,"div",4)(5,"div",5)(6,"div",6)(7,"input",7),w("ngModelChange",function(n){m(t);let p=c();return C(p.filterTerm,n)||(p.filterTerm=n),u(n)}),g("input",function(){m(t);let n=c();return u(n.applyFilters())}),l(),o(8,"select",8),w("ngModelChange",function(n){m(t);let p=c();return C(p.sortOption,n)||(p.sortOption=n),u(n)}),g("change",function(){m(t);let n=c();return u(n.applyFilters())}),o(9,"option",9),d(10,"Sort by Name (A-Z)"),l(),o(11,"option",10),d(12,"Sort by Name (Z-A)"),l(),o(13,"option",11),d(14,"Newest"),l(),o(15,"option",12),d(16,"Oldest"),l()()()(),o(17,"div",13),f(18,J,3,0,"div",14)(19,$,8,7,"div",15),l()()()}if(e&2){let t=c();a(3),s("ngIf",t.error),a(4),v("ngModel",t.filterTerm),a(),v("ngModel",t.sortOption),a(10),s("ngIf",t.filteredAuthors.length===0&&!t.loading&&!t.error),a(),s("ngForOf",t.filteredAuthors)}}var U=class e{constructor(i){this.authorService=i}authors=[];filteredAuthors=[];filterTerm="";sortOption="name-asc";loading=!1;error=null;ngOnInit(){return y(this,null,function*(){this.loading=!0,this.error=null;try{this.authors=yield this.authorService.getAll(),this.applyFilters()}catch(i){console.error("Error fetching authors:",i),this.error="Failed to load authors. Please try again later.",this.authors=[]}finally{this.loading=!1}})}getTruncatedBio(i){if(!i)return"";let t=150;return i.length>t?i.slice(0,t)+"...":i}applyFilters(){let i=[...this.authors];this.filterTerm&&(i=i.filter(t=>t.name.toLowerCase().includes(this.filterTerm.toLowerCase()))),i.sort((t,r)=>{switch(this.sortOption){case"name-asc":return t.name.localeCompare(r.name);case"name-desc":return r.name.localeCompare(t.name);case"date-newest":let n=t.createdAt?new Date(t.createdAt).getTime():0;return(r.createdAt?new Date(r.createdAt).getTime():0)-n;case"date-oldest":let R=t.createdAt?new Date(t.createdAt).getTime():0,Z=r.createdAt?new Date(r.createdAt).getTime():0;return R-Z;default:return 0}}),this.filteredAuthors=i}static \u0275fac=function(t){return new(t||e)(O(V))};static \u0275cmp=b({type:e,selectors:[["app-author-list"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","author-list-wrapper",4,"ngIf"],[1,"author-list-wrapper"],["class","error-message",4,"ngIf"],[1,"author-list-card"],[1,"filter-bar-card"],[1,"filter-bar"],["placeholder","Search by name...","aria-label","Search authors by name",3,"ngModelChange","input","ngModel"],["aria-label","Sort authors by",3,"ngModelChange","change","ngModel"],["value","name-asc"],["value","name-desc"],["value","date-newest"],["value","date-oldest"],[1,"author-cards-container"],["class","no-authors-message",4,"ngIf"],["class","author-card",4,"ngFor","ngForOf"],[1,"error-message"],[3,"click"],[1,"no-authors-message"],[1,"author-card"],[1,"author-card-content"],["class","author-avatar",3,"src","alt",4,"ngIf"],["src","assets/images/defaultAvatar.jpg","alt","Default avatar","class","author-avatar default",4,"ngIf"],[1,"author-info"],[1,"author-name",3,"routerLink"],["class","author-bio-display",3,"innerHTML",4,"ngIf"],[1,"author-avatar",3,"src","alt"],["src","assets/images/defaultAvatar.jpg","alt","Default avatar",1,"author-avatar","default"],[1,"author-bio-display",3,"innerHTML"]],template:function(t,r){t&1&&f(0,q,1,0,"app-loading-spinner",0)(1,tt,20,5,"div",1),t&2&&(s("ngIf",r.loading),a(),s("ngIf",!r.loading))},dependencies:[I,L,P,E,k,z,B,W,F,j,N,D,H],styles:[".author-list-wrapper[_ngcontent-%COMP%]{width:100%;display:flex;flex-direction:column;align-items:center}.author-list-wrapper[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.author-list-card[_ngcontent-%COMP%]{width:95%;background:#fff;border-radius:16px;padding:2rem;box-shadow:0 8px 20px #0000001a;display:flex;flex-direction:column;gap:2rem}.filter-bar-card[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:flex-start}.filter-bar[_ngcontent-%COMP%]{display:flex;width:50%;gap:2%}.filter-bar[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:.5rem;border-radius:8px;border:1px solid #ccc}.filter-bar[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:30%;padding:.5rem;border-radius:8px;border:1px solid #ccc}.author-cards-container[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;gap:1.5rem;justify-content:flex-start;align-items:stretch}.author-card[_ngcontent-%COMP%]{width:100%;min-height:200px;background:#f9f9f9;border-radius:12px;padding:1rem;box-shadow:0 4px 12px #0000000d;flex-direction:row;align-items:flex-start;gap:1rem;transition:transform .2s ease;display:flex;flex-direction:column;justify-content:space-between}.author-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.author-card-content[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:flex-start;gap:1rem;flex-grow:1}.author-card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:200px;height:200px;border-radius:50%;object-fit:cover;flex-shrink:0}.author-info[_ngcontent-%COMP%]{display:flex;flex-direction:column;text-align:left;overflow:hidden;flex-grow:1}.author-name[_ngcontent-%COMP%]{font-weight:700;font-size:3rem;color:#333;text-decoration:none;margin-bottom:.25rem}.author-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.author-bio-display[_ngcontent-%COMP%]{font-size:1rem;color:#555;overflow:hidden;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:4;line-clamp:4;word-break:break-word;flex-shrink:0}@media (max-width: 768px){.author-card[_ngcontent-%COMP%]{width:100%}}"]})};export{U as AuthorListComponent};
