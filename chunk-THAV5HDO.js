import{D as u,G as h,bc as c,cc as i,jc as f,kc as p,lc as m,mc as n,uc as d}from"./chunk-NOMZ4WY3.js";import{a,b as l,h as e}from"./chunk-MG3ERZGY.js";var g=class s{constructor(r){this.firebase=r}get authorCollection(){return c(this.firebase.firestore,"authors")}get userCollection(){return c(this.firebase.firestore,"users")}getAll(){return e(this,null,function*(){return(yield p(this.authorCollection)).docs.map(t=>a({id:t.id},t.data()))})}getById(r){return e(this,null,function*(){let t=i(this.authorCollection,r),o=yield f(t);return o.exists()?a({id:o.id},o.data()):null})}update(r,t){return e(this,null,function*(){let o=i(this.authorCollection,r);if(yield n(o,t),t.avatarUrl){let v=i(this.userCollection,r);yield n(v,{"profile.photoURL":t.avatarUrl})}})}create(r,t){return e(this,null,function*(){let o=i(this.authorCollection,r);yield m(o,l(a({},t),{createdAt:new Date().toISOString()}))})}static \u0275fac=function(t){return new(t||s)(h(d))};static \u0275prov=u({token:s,factory:s.\u0275fac,providedIn:"root"})};export{g as a};
