import{a as F}from"./chunk-2WUMKADO.js";import{c as X,f as Y,h as Z,o as ee,q as te}from"./chunk-UL765BIR.js";import{Ca as h,D as b,Da as f,Ea as c,G as T,Na as L,O as m,Oa as p,P as d,Q as U,Qa as E,R as z,Sa as j,Ta as R,Ua as A,W as v,Ya as _,bb as H,bc as G,ca as D,ea as l,ec as q,ha as w,ia as y,kc as J,l as N,na as u,ob as B,oc as K,pb as W,qa as s,qb as O,uc as Q,vb as P,wa as o,xa as r,ya as M,zb as $}from"./chunk-NOMZ4WY3.js";import{a as k,h as x}from"./chunk-MG3ERZGY.js";var I=class i{constructor(t){this.firebase=t;this.tagCollection=G(this.firebase.firestore,"tags")}tagCollection;getAll(t){return x(this,null,function*(){return(yield J(q(this.tagCollection))).docs.map(n=>k({id:n.id},n.data())).filter(n=>!t||n.type===t)})}addTag(t,e){return x(this,null,function*(){let n=t.trim().toLowerCase(),g=(yield this.getAll(e)).find(oe=>oe.name.toLowerCase()===n);if(g)return g;let C={name:n,type:e},ae=yield K(this.tagCollection,C);return k({id:ae.id},C)})}static \u0275fac=function(e){return new(e||i)(T(Q))};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};function ce(i,t){if(i&1){let e=h();o(0,"div",6)(1,"input",7),A("ngModelChange",function(a){m(e);let g=c();return R(g.newTagName,a)||(g.newTagName=a),d(a)}),f("keyup.enter",function(){m(e);let a=c();return d(a.addTag())}),r(),o(2,"button",8),f("click",function(){m(e);let a=c();return d(a.addTag())}),p(3,"Add"),r()()}if(i&2){let e=c();l(),j("ngModel",e.newTagName)}}function pe(i,t){if(i&1){let e=h();o(0,"span",11),f("click",function(){let a=m(e).$implicit,g=c(2);return d(g.selectTag(a))}),p(1),r()}if(i&2){let e=t.$implicit;l(),E(" ",e.name," ")}}function ge(i,t){if(i&1&&(o(0,"div",9),u(1,pe,2,1,"span",10),r()),i&2){let e=c();l(),s("ngForOf",e.filteredTags)}}function me(i,t){if(i&1){let e=h();o(0,"span",12),p(1),o(2,"button",13),f("click",function(){let a=m(e).$implicit,g=c();return d(g.removeTag(a))}),p(3,"\xD7"),r()()}if(i&2){let e=t.$implicit;l(),E(" ",e.name," ")}}function de(i,t){i&1&&(o(0,"div",14),p(1," Maximum of 5 tags allowed. "),r())}function ue(i,t){i&1&&(o(0,"div",14),p(1," Tag name must be 15 characters or fewer. "),r())}var ie=class i{constructor(t){this.tagService=t}selectedTags=[];tagType="article";filterOnly=!1;selectedTagsChange=new v;availableTags=[];filteredTags=[];newTagName="";ngOnInit(){return x(this,null,function*(){this.availableTags=yield this.tagService.getAll(this.tagType),this.filterTags()})}addTag(){return x(this,null,function*(){let t=this.newTagName.trim();if(this.filterOnly||!t||this.selectedTags.length>=5)return;if(t.length>15){alert("Tag name cannot exceed 15 characters.");return}let e=yield this.tagService.addTag(t,this.tagType);this.selectedTags.find(n=>n.id===e.id)||(this.selectedTags.push(e),this.selectedTagsChange.emit(this.selectedTags)),this.newTagName="",this.availableTags=yield this.tagService.getAll(this.tagType),this.filterTags()})}filterTags(){let t=this.newTagName.trim().toLowerCase();this.filteredTags=t?this.availableTags.filter(e=>e.name.toLowerCase().includes(t)&&!this.selectedTags.some(n=>n.id===e.id)):[]}selectTag(t){!this.selectedTags.find(e=>e.id===t.id)&&this.selectedTags.length<5&&(this.selectedTags.push(t),this.selectedTagsChange.emit(this.selectedTags)),this.newTagName="",this.filterTags()}removeTag(t){this.selectedTags=this.selectedTags.filter(e=>e.id!==t.id),this.selectedTagsChange.emit(this.selectedTags),this.filterTags()}static \u0275fac=function(e){return new(e||i)(w(I))};static \u0275cmp=y({type:i,selectors:[["app-tag-selector"]],inputs:{selectedTags:"selectedTags",tagType:"tagType",filterOnly:"filterOnly"},outputs:{selectedTagsChange:"selectedTagsChange"},decls:7,vars:5,consts:[[1,"tag-selector"],["class","tag-input-group",4,"ngIf"],["class","tag-suggestions",4,"ngIf"],[1,"selected-tags"],["class","tag",4,"ngFor","ngForOf"],["class","tag-limit-warning",4,"ngIf"],[1,"tag-input-group"],["type","text","placeholder","Add a tag","maxlength","16",3,"ngModelChange","keyup.enter","ngModel"],["type","button","maxlength","16",3,"click"],[1,"tag-suggestions"],["class","tag-suggestion",3,"click",4,"ngFor","ngForOf"],[1,"tag-suggestion",3,"click"],[1,"tag"],["type","button",3,"click"],[1,"tag-limit-warning"]],template:function(e,n){e&1&&(o(0,"div",0),u(1,ce,4,1,"div",1)(2,ge,2,1,"div",2),o(3,"div",3),u(4,me,4,1,"span",4),r(),u(5,de,2,0,"div",5)(6,ue,2,0,"div",5),r()),e&2&&(l(),s("ngIf",!n.filterOnly),l(),s("ngIf",n.filteredTags.length>0),l(2),s("ngForOf",n.selectedTags),l(),s("ngIf",n.selectedTags.length>=5),l(),s("ngIf",n.newTagName.trim().length>15))},dependencies:[P,W,O,te,X,Y,ee,Z],styles:[".tag-selector[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem;padding:.5rem;border:1px solid #ccc;border-radius:4px}.tag-input-group[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-wrap:wrap}.tag-input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{flex:1;padding:.4rem .6rem;border:1px solid #ccc;border-radius:4px}.tag-input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.4rem 1rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.tag-input-group[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.tag-suggestions[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.4rem}.tag-suggestion[_ngcontent-%COMP%]{padding:.3rem .6rem;background-color:#eee;border-radius:3px;cursor:pointer;font-size:.9rem}.tag-suggestion[_ngcontent-%COMP%]:hover{background-color:#ddd}.selected-tags[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:.5rem}.tag[_ngcontent-%COMP%]{background-color:#e0f7fa;color:#00796b;padding:.3rem .6rem;border-radius:16px;display:flex;align-items:center;font-size:.9rem}.tag[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:none;border:none;margin-left:.5rem;color:#00796b;cursor:pointer;font-size:1.2rem;line-height:1}.tag-limit-warning[_ngcontent-%COMP%]{color:#d32f2f;font-size:.85rem;margin-top:-.4rem}"]})};var S=class i{constructor(t){this.http=t}cloudName=F.cloudName;uploadPreset=F.uploadPreset;uploadImage(t){let e=`https://api.cloudinary.com/v1_1/${this.cloudName}/image/upload`,n=new FormData;return n.append("file",t),n.append("upload_preset",this.uploadPreset),this.http.post(e,n).pipe(N(a=>a.secure_url))}static \u0275fac=function(e){return new(e||i)(T($))};static \u0275prov=b({token:i,factory:i.\u0275fac,providedIn:"root"})};var he=(i,t)=>({"profile-pic-container":i,"thumbnail-container":t}),xe=(i,t)=>({"profile-pic-area":i,"thumbnail-area":t}),_e=(i,t)=>({"profile-pic-preview":i,"thumbnail-preview":t}),Ce=(i,t)=>({"profile-pic-placeholder":i,"thumbnail-placeholder":t});function be(i,t){if(i&1&&M(0,"img",10),i&2){let e=c();s("src",e.imageUrl,D)("ngClass",_(2,_e,e.type==="profilePic",e.type==="thumbnailUrl"))}}function Te(i,t){if(i&1&&(o(0,"div",11)(1,"span",12),p(2,"\u{1F5BC}\uFE0F"),r(),o(3,"span",13),p(4,"Upload Image"),r(),o(5,"span",14),p(6,"Max 2MB"),r()()),i&2){let e=c();s("ngClass",_(1,Ce,e.type==="profilePic",e.type==="thumbnailUrl"))}}function ve(i,t){if(i&1){let e=h();o(0,"button",15),f("click",function(){m(e);let a=c();return d(a.removeImage())}),U(),o(1,"svg",6),M(2,"path",16),r()()}}var ne=class i{constructor(t){this.cloudinaryService=t}imageUrl=null;type="profilePic";imageChange=new v;uploading=!1;onFileSelected(t){let e=t.target;if(e.files&&e.files.length>0){let n=e.files[0];this.uploading=!0,this.cloudinaryService.uploadImage(n).subscribe({next:a=>{this.imageUrl=a,this.imageChange.emit(this.imageUrl),this.uploading=!1},error:a=>{console.error("Image upload failed",a),this.uploading=!1}})}}removeImage(){this.imageUrl=null,this.imageChange.emit(null)}static \u0275fac=function(e){return new(e||i)(w(S))};static \u0275cmp=y({type:i,selectors:[["app-upload-image"]],inputs:{imageUrl:"imageUrl",type:"type"},outputs:{imageChange:"imageChange"},decls:11,vars:11,consts:[["placeholder",""],[1,"upload-image-wrapper",3,"ngClass"],[1,"image-display-area",3,"ngClass"],["alt","Uploaded Image",3,"src","ngClass",4,"ngIf","ngIfElse"],[1,"icon-controls"],["for","fileUploadInput","title","Upload/Change Image","role","button","aria-label","Upload or change image",1,"upload-edit-icon"],["xmlns","http://www.w3.org/2000/svg","height","20","width","20","fill","white","viewBox","0 0 24 24"],["d","M3 17.25V21h3.75L17.81 9.94l-3.75-3.75L3 17.25zM20.71 7.04a1.003 1.003 0 0 0 0-1.42L18.37 3.29a1.003 1.003 0 0 0-1.42 0l-1.83 1.83 3.75 3.75 1.84-1.83z"],["class","remove-icon","title","Remove Image","aria-label","Remove image",3,"click",4,"ngIf"],["type","file","id","fileUploadInput","accept","image/*","hidden","",3,"change"],["alt","Uploaded Image",3,"src","ngClass"],[1,"image-placeholder-content",3,"ngClass"],[1,"upload-icon"],[1,"placeholder-text"],[1,"size-limit-text"],["title","Remove Image","aria-label","Remove image",1,"remove-icon",3,"click"],["d","M18.3 5.71a1 1 0 00-1.41 0L12 10.59 7.11 5.7a1 1 0 10-1.41 1.41L10.59 12l-4.89 4.89a1 1 0 101.41 1.41L12 13.41l4.89 4.89a1 1 0 001.41-1.41L13.41 12l4.89-4.89a1 1 0 000-1.4z"]],template:function(e,n){if(e&1){let a=h();o(0,"div",1)(1,"div",2),u(2,be,1,5,"img",3)(3,Te,7,4,"ng-template",null,0,H),r()(),o(5,"div",4)(6,"label",5),U(),o(7,"svg",6),M(8,"path",7),r()(),u(9,ve,3,0,"button",8),r(),z(),o(10,"input",9),f("change",function(C){return m(a),d(n.onFileSelected(C))}),r()}if(e&2){let a=L(4);s("ngClass",_(5,he,n.type==="profilePic",n.type==="thumbnailUrl")),l(),s("ngClass",_(8,xe,n.type==="profilePic",n.type==="thumbnailUrl")),l(),s("ngIf",n.imageUrl)("ngIfElse",a),l(7),s("ngIf",n.imageUrl)}},dependencies:[P,B,O],styles:[".upload-image-wrapper[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;overflow:hidden;position:relative;box-sizing:border-box;border-radius:8px;background-color:#f9f9f9;box-shadow:0 2px 4px #0000001a;width:80%;max-width:400px;min-width:200px}.profile-pic-container[_ngcontent-%COMP%]{padding-bottom:80%;max-width:300px;max-height:300px;min-width:120px;min-height:120px;border-radius:50%}.thumbnail-container[_ngcontent-%COMP%]{padding-bottom:50%;max-width:500px;max-height:300px;min-width:180px;min-height:100px;border-radius:8px}.image-display-area[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;background-color:#f0f0f0;overflow:hidden}.profile-pic-area[_ngcontent-%COMP%]{border-radius:50%}.thumbnail-area[_ngcontent-%COMP%]{border-radius:8px}.profile-pic-preview[_ngcontent-%COMP%], .thumbnail-preview[_ngcontent-%COMP%]{width:95%;height:95%;object-fit:cover;border-radius:inherit;border:2px solid #ccc}.image-placeholder-content[_ngcontent-%COMP%]{width:95%;height:95%;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#aaa;text-align:center;background-color:#e9e9e9;border:2px dashed #ccc;cursor:default;margin:auto}.profile-pic-placeholder[_ngcontent-%COMP%]{border-radius:50%}.thumbnail-placeholder[_ngcontent-%COMP%]{border-radius:8px}.upload-icon[_ngcontent-%COMP%]{font-size:3em;margin-bottom:5px;line-height:1}.placeholder-text[_ngcontent-%COMP%]{font-weight:700;margin-bottom:5px}.size-limit-text[_ngcontent-%COMP%]{font-size:.8em;color:#888}.overlay[_ngcontent-%COMP%]{position:absolute;top:5px;right:5px;display:flex;gap:5px;z-index:20}.upload-edit-icon[_ngcontent-%COMP%]{background-color:#0009;color:#fff;border-radius:50%;width:32px;height:32px;display:flex;justify-content:center;align-items:center;font-size:1.2em;cursor:pointer;box-shadow:0 1px 3px #0003;transition:background-color .3s ease}.upload-edit-icon[_ngcontent-%COMP%]:hover{background-color:#000c}.remove-icon[_ngcontent-%COMP%]{background-color:#ff4d4f;color:#fff;border:none;border-radius:50%;width:32px;height:32px;display:flex;align-items:center;justify-content:center;font-size:1.2em;cursor:pointer;box-shadow:0 1px 3px #0003;transition:background-color .3s ease;padding:0;line-height:1}.remove-icon[_ngcontent-%COMP%]:hover{background-color:#c00}@media (max-width: 768px){.profile-pic-container[_ngcontent-%COMP%]{max-width:200px;max-height:200px}.thumbnail-container[_ngcontent-%COMP%]{max-width:300px;max-height:180px}.upload-edit-icon[_ngcontent-%COMP%], .remove-icon[_ngcontent-%COMP%]{width:28px;height:28px;font-size:1em}.overlay[_ngcontent-%COMP%]{top:5px;right:5px}}@media (max-width: 480px){.profile-pic-container[_ngcontent-%COMP%]{width:90%;padding-bottom:90%;min-width:100px;min-height:100px}.thumbnail-container[_ngcontent-%COMP%]{width:90%;padding-bottom:60%;min-width:150px;min-height:80px}}"]})};export{ie as a,ne as b};
