<app-loading-spinner *ngIf="loading" />

<div *ngIf="!loading && article" class="article-details-container">
  <div class="article-card">
    <img
      *ngIf="article.thumbnailUrl"
      [src]="article.thumbnailUrl"
      alt="Article image"
      class="article-thumbnail"
    />

    <div class="article-meta">
      <h1 class="article-title">{{ article.title }}</h1>
      <p class="article-author">
        By <strong>{{ author?.name }}</strong> on
        {{ article | articleDate | date : 'mediumDate' }}
      </p>
      <p class="article-info">
        <span *ngIf="article.likesCount"> | ğŸ‘ {{ article.likesCount }} likes</span>
        <span *ngIf="article.commentsCount"> | ğŸ’¬ {{ article.commentsCount }} comments</span>
      </p>
    </div>

    <div *ngIf="article.tags?.length" class="article-tags">
      <span *ngFor="let tag of article.tags" class="tag-chip">#{{ tag }}</span>
    </div>

    <div class="article-content" [innerHTML]="article.content"></div>
  </div>

  <ng-container *ngIf="article?.id as articleId">
    <button class="show-comments-btn" (click)="showComments = true">ğŸ’¬ Add a comment</button>
  </ng-container>
</div>

<ng-container *ngIf="article?.id as articleId">
  <app-comment-panel
    [visible]="showComments"
    [articleId]="articleId"
    (closed)="showComments = false">
  </app-comment-panel>
</ng-container>


<div *ngIf="canEdit" class="edit-actions">
  <button (click)="goToEdit()" class="edit-btn">âœï¸ Edit Article</button>
</div>