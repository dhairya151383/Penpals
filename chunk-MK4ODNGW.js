import{j as E}from"./chunk-TRGRSSL6.js";import"./chunk-TL62S5XC.js";import"./chunk-THAV5HDO.js";import{a as A}from"./chunk-IWDVFKXM.js";import{c as O,e as p,f as S,g as I,i as N,j as R,k,l as T,m as F,n as L,p as q,r as G}from"./chunk-UL765BIR.js";import{Da as v,Ea as c,Fb as P,Gb as y,Oa as s,Qa as b,ca as C,ea as o,ha as f,ia as x,na as m,qa as l,qb as M,sa as g,vb as w,wa as i,xa as n,ya as d}from"./chunk-NOMZ4WY3.js";import{h as _}from"./chunk-MG3ERZGY.js";function B(e,a){e&1&&(i(0,"small"),s(1,"Title is required."),n())}function Y(e,a){if(e&1&&(i(0,"div",37),m(1,B,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.title.hasError("required"))}}function H(e,a){e&1&&(i(0,"small"),s(1,"First name is required."),n())}function J(e,a){if(e&1&&(i(0,"div",37),m(1,H,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.firstName.hasError("required"))}}function K(e,a){e&1&&(i(0,"small"),s(1,"Email is required."),n())}function Q(e,a){e&1&&(i(0,"small"),s(1,"Please enter a valid email address."),n())}function X(e,a){if(e&1&&(i(0,"div",37),m(1,K,2,0,"small",30)(2,Q,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.email.hasError("required")),o(),l("ngIf",r.f.email.hasError("email"))}}function Z(e,a){e&1&&(i(0,"small"),s(1,"Password is required."),n())}function $(e,a){e&1&&(i(0,"small"),s(1,"Password must be at least 6 characters."),n())}function ee(e,a){if(e&1&&(i(0,"div",37),m(1,Z,2,0,"small",30)(2,$,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.password.hasError("required")),o(),l("ngIf",r.f.password.hasError("minlength"))}}function te(e,a){e&1&&(i(0,"small"),s(1,"Confirm password is required."),n())}function ie(e,a){e&1&&(i(0,"small"),s(1,"Passwords do not match."),n())}function ne(e,a){if(e&1&&(i(0,"div",37),m(1,te,2,0,"small",30)(2,ie,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.confirmPassword.hasError("required")),o(),l("ngIf",r.registerForm.hasError("passwordMismatch"))}}function re(e,a){e&1&&(i(0,"small"),s(1,"Please select a role."),n())}function oe(e,a){if(e&1&&(i(0,"div",37),m(1,re,2,0,"small",30),n()),e&2){let r=c();o(),l("ngIf",r.f.role.hasError("required"))}}function ae(e,a){if(e&1&&(i(0,"div",38),s(1),n()),e&2){let r=c();o(),b(" ",r.errorMessage," ")}}function se(e,a){if(e&1&&(i(0,"div",39),s(1),n()),e&2){let r=c();o(),b(" ",r.successMessage," ")}}function le(e,a){e&1&&(i(0,"span"),s(1,"Create account"),n())}function me(e,a){e&1&&d(0,"app-loading-spinner")}function de(e){let a=e.get("password"),r=e.get("confirmPassword");return!a||!r?null:a.value!==r.value?((r.touched||r.dirty)&&r.setErrors({passwordMismatch:!0}),{passwordMismatch:!0}):(r.hasError("passwordMismatch")&&r.setErrors(null),null)}var z=class e{constructor(a,r,t){this.fb=a;this.authService=r;this.router=t}registerForm;isLoading=!1;errorMessage=null;successMessage=null;ngOnInit(){this.registerForm=this.fb.group({title:["Mr",p.required],firstName:["",p.required],lastName:[""],email:["",[p.required,p.email]],password:["",[p.required,p.minLength(6)]],confirmPassword:["",p.required],role:["",p.required]},{validators:de})}get f(){return this.registerForm.controls}onRegister(){return _(this,null,function*(){if(this.registerForm.markAllAsTouched(),this.errorMessage=null,this.successMessage=null,this.registerForm.invalid){this.errorMessage="Please fix the errors in the form before submitting.";return}this.isLoading=!0;let{title:a,firstName:r,lastName:t,email:h,password:D,role:j}=this.registerForm.value,V=a==="Mr"?"male":"female",U=(r.trim()+(t?" "+t.trim():"")).trim(),W=r.trim();try{yield this.authService.registerWithEmail(h,D,W,j,U,V),this.successMessage="Registration successful! You will be redirected to the dashboard shortly.",setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)}catch(u){u.code==="auth/email-already-in-use"?this.errorMessage="This email address is already in use. Please log in or use a different email.":u.code==="auth/weak-password"?this.errorMessage="Password is too weak. Please choose a stronger password.":u.code==="auth/invalid-email"?this.errorMessage="The email address is badly formatted.":this.errorMessage=u.message||"Registration failed. An unexpected error occurred. Please try again.",console.error("Registration error:",u)}finally{this.isLoading=!1}})}signInWithGoogle(){return _(this,null,function*(){this.isLoading=!0,this.errorMessage=null,this.successMessage=null;try{yield this.authService.signInWithGoogle(),this.successMessage="Google registration successful! You will be redirected to the dashboard shortly.",setTimeout(()=>{this.router.navigate(["/dashboard"])},2e3)}catch(a){a.code==="auth/popup-closed-by-user"?this.errorMessage="Google sign-in was cancelled by the user.":this.errorMessage=a.message||"Google registration failed. An unexpected error occurred. Please try again.",console.error("Google sign-in error:",a)}finally{this.isLoading=!1}})}static \u0275fac=function(r){return new(r||e)(f(q),f(E),f(P))};static \u0275cmp=x({type:e,selectors:[["app-register"]],decls:62,vars:28,consts:[[1,"register-container"],[1,"left-column"],[1,"branding-content"],["src","assets/images/logo.jpg","alt","Logo",1,"logo"],[1,"branding-text"],[1,"right-column"],[1,"form-wrapper"],[1,"title"],[1,"subtitle"],["routerLink","/login",1,"link"],["novalidate","",3,"ngSubmit","formGroup"],[1,"input-group"],[1,"input-row"],["formControlName","title"],["value","","disabled","","selected",""],["value","Mr"],["value","Mrs/Miss"],["type","text","placeholder","First Name","formControlName","firstName"],[1,"error-container"],["class","error-text",4,"ngIf"],["type","text","placeholder","Last Name (optional)","formControlName","lastName"],["type","email","placeholder","Email","formControlName","email"],["type","password","placeholder","Enter your password","formControlName","password"],["type","password","placeholder","Confirm password","formControlName","confirmPassword"],["formControlName","role"],["value","user"],["value","author"],["class","error-box",4,"ngIf"],["class","success-box",4,"ngIf"],["type","submit",1,"submit-button",3,"disabled"],[4,"ngIf"],[1,"divider"],[1,"line"],[1,"divider-text"],[1,"social-buttons"],[1,"google-button",3,"click","disabled"],["alt","Google Icon",1,"google-icon",3,"src"],[1,"error-text"],[1,"error-box"],[1,"success-box"]],template:function(r,t){r&1&&(i(0,"div",0)(1,"div",1)(2,"div",2),d(3,"img",3),i(4,"p",4),s(5,"Capturing Moments, Creating Memories"),n()()(),i(6,"div",5)(7,"div",6)(8,"h2",7),s(9,"Create an account"),n(),i(10,"p",8),s(11," Already have an account? "),i(12,"a",9),s(13,"Log in"),n()(),i(14,"form",10),v("ngSubmit",function(){return t.onRegister()}),i(15,"div",11)(16,"div",12)(17,"select",13)(18,"option",14),s(19,"Select Title"),n(),i(20,"option",15),s(21,"Mr"),n(),i(22,"option",16),s(23,"Mrs/Miss"),n()(),d(24,"input",17),n(),i(25,"div",18),m(26,Y,2,1,"div",19)(27,J,2,1,"div",19),n()(),i(28,"div",11),d(29,"input",20),n(),i(30,"div",11),d(31,"input",21),m(32,X,3,2,"div",19),n(),i(33,"div",11),d(34,"input",22),m(35,ee,3,2,"div",19),n(),i(36,"div",11),d(37,"input",23),m(38,ne,3,2,"div",19),n(),i(39,"div",11)(40,"select",24)(41,"option",14),s(42,"Select Role"),n(),i(43,"option",25),s(44,"User"),n(),i(45,"option",26),s(46,"Author"),n()(),m(47,oe,2,1,"div",19),n(),m(48,ae,2,1,"div",27)(49,se,2,1,"div",28),i(50,"button",29),m(51,le,2,0,"span",30)(52,me,1,0,"app-loading-spinner",30),n()(),i(53,"div",31),d(54,"hr",32),i(55,"span",33),s(56,"Or register with"),n(),d(57,"hr",32),n(),i(58,"div",34)(59,"button",35),v("click",function(){return t.signInWithGoogle()}),d(60,"img",36),s(61," Google "),n()()()()()),r&2&&(o(14),l("formGroup",t.registerForm),o(3),g("input-error",t.f.title.invalid&&t.f.title.touched),o(7),g("input-error",t.f.firstName.invalid&&t.f.firstName.touched),o(2),l("ngIf",t.f.title.invalid&&t.f.title.touched),o(),l("ngIf",t.f.firstName.invalid&&t.f.firstName.touched),o(2),g("input-error",t.f.lastName.invalid&&t.f.lastName.touched),o(2),g("input-error",t.f.email.invalid&&t.f.email.touched),o(),l("ngIf",t.f.email.invalid&&t.f.email.touched),o(2),g("input-error",t.f.password.invalid&&t.f.password.touched),o(),l("ngIf",t.f.password.invalid&&t.f.password.touched),o(2),g("input-error",t.f.confirmPassword.invalid&&t.f.confirmPassword.touched||t.registerForm.hasError("passwordMismatch")&&t.f.confirmPassword.touched),o(),l("ngIf",t.f.confirmPassword.invalid&&t.f.confirmPassword.touched||t.registerForm.hasError("passwordMismatch")&&t.f.confirmPassword.touched),o(2),g("input-error",t.f.role.invalid&&t.f.role.touched),o(7),l("ngIf",t.f.role.invalid&&t.f.role.touched),o(),l("ngIf",t.errorMessage),o(),l("ngIf",t.successMessage),o(),l("disabled",t.registerForm.invalid||t.isLoading),o(),l("ngIf",!t.isLoading),o(),l("ngIf",t.isLoading),o(7),l("disabled",t.isLoading),o(),l("src","assets/icons/google.svg",C))},dependencies:[w,M,G,N,F,L,O,T,S,I,R,k,y,A],styles:["*[_ngcontent-%COMP%]{box-sizing:border-box}body[_ngcontent-%COMP%], html[_ngcontent-%COMP%]{margin:0;padding:0;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;background:#f5f7fa;color:#333}.register-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#fff;box-shadow:0 0 15px #0000001a;border-radius:8px;overflow:hidden;max-width:1100px;margin:2rem auto}.left-column[_ngcontent-%COMP%]{flex:1 1 50%;background:linear-gradient(135deg,#a8d5ba,#5fbc7e);color:#fff;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:3rem 2rem;text-align:center;position:relative}.branding-content[_ngcontent-%COMP%]{max-width:320px}.logo[_ngcontent-%COMP%]{width:120px;margin-bottom:1.5rem}.branding-text[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;line-height:1.4;margin:0 auto}.right-column[_ngcontent-%COMP%]{flex:1 1 50%;padding:3rem;display:flex;justify-content:center;align-items:center;background-color:#fff}.form-wrapper[_ngcontent-%COMP%]{width:100%;max-width:400px}.title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:700;margin-bottom:.25rem;color:#222}.subtitle[_ngcontent-%COMP%]{font-size:.9rem;margin-bottom:2rem;color:#666}.link[_ngcontent-%COMP%]{color:#5fbc7e;text-decoration:none;font-weight:600}.link[_ngcontent-%COMP%]:hover{text-decoration:underline}input[type=text][_ngcontent-%COMP%], input[type=email][_ngcontent-%COMP%], input[type=password][_ngcontent-%COMP%], select[_ngcontent-%COMP%]{width:100%;padding:12px 14px;margin-bottom:1.2rem;font-size:1rem;border:1.8px solid #ccc;border-radius:6px;transition:border-color .3s ease;outline-offset:2px}input[type=text][_ngcontent-%COMP%]:focus, input[type=email][_ngcontent-%COMP%]:focus, input[type=password][_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{border-color:#5fbc7e;outline:none}.input-error[_ngcontent-%COMP%]{border-color:#e74c3c!important}.input-row[_ngcontent-%COMP%]{display:flex;gap:1rem;margin-bottom:1rem}.input-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{flex:0 35%;margin-bottom:0;-webkit-appearance:none;-moz-appearance:none;appearance:none;background-image:url(data:image/svg+xml;charset=US-ASCII,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20width%3D%22292.4%22%20height%3D%22292.4%22%3E%3Cpath%20fill%3D%22%23000000%22%20d%3D%22M287%2C197.989L146.202%2C57.189L5.4%2C197.989L0.2%2C192.789L146.202%2C46.789L292.2%2C192.789L287%2C197.989z%22%2F%3E%3C%2Fsvg%3E);background-repeat:no-repeat;background-position:right .7em top 50%;background-size:.65em auto;padding-right:2.5em}.input-row[_ngcontent-%COMP%]   input[formcontrolname=firstName][_ngcontent-%COMP%]{flex:0 0 65%;margin-bottom:0}.error-text[_ngcontent-%COMP%]{color:#e74c3c;font-size:.85rem;margin-top:-1rem;margin-bottom:1rem;min-height:18px}.error-box[_ngcontent-%COMP%], .success-box[_ngcontent-%COMP%]{padding:1rem;border-radius:6px;margin-bottom:1rem;font-weight:600;text-align:center}.error-box[_ngcontent-%COMP%]{background-color:#fdecea;color:#b71c1c;border:1.5px solid #e74c3c}.success-box[_ngcontent-%COMP%]{background-color:#e6f4ea;color:#2e7d32;border:1.5px solid #5fbc7e}.submit-button[_ngcontent-%COMP%]{width:100%;background-color:#5fbc7e;color:#fff;font-weight:700;font-size:1.1rem;padding:14px 0;border:none;border-radius:8px;cursor:pointer;transition:background-color .3s ease;display:flex;justify-content:center;align-items:center;gap:.5rem}.submit-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#4a9b5a}.submit-button[_ngcontent-%COMP%]:disabled{background-color:#a5d3b2;cursor:not-allowed}.divider[_ngcontent-%COMP%]{display:flex;align-items:center;margin:2rem 0 1.5rem}.line[_ngcontent-%COMP%]{flex-grow:1;height:1px;background-color:#ddd;border:none}.divider-text[_ngcontent-%COMP%]{margin:0 1rem;color:#999;font-size:.9rem;font-weight:600}.social-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1rem}.google-button[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.6rem;background-color:#fff;border:1.8px solid #ccc;border-radius:8px;padding:8px 14px;font-weight:600;font-size:1rem;cursor:pointer;transition:background-color .3s ease,border-color .3s ease}.google-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5;border-color:#5fbc7e}.google-icon[_ngcontent-%COMP%]{width:20px;height:20px}@media (max-width: 900px){.register-container[_ngcontent-%COMP%]{flex-direction:column;max-width:90vw;margin:1rem auto;border-radius:0}.left-column[_ngcontent-%COMP%], .right-column[_ngcontent-%COMP%]{flex:unset;width:100%;padding:2rem 1.5rem}.form-wrapper[_ngcontent-%COMP%]{max-width:100%}.input-row[_ngcontent-%COMP%]{flex-direction:column}.input-row[_ngcontent-%COMP%]   select[_ngcontent-%COMP%], .input-row[_ngcontent-%COMP%]   input[formcontrolname=firstName][_ngcontent-%COMP%]{flex:0 0 100%;margin-bottom:1.2rem}.error-text[_ngcontent-%COMP%]{margin-top:4px}}"]})};export{z as RegisterComponent,de as passwordMatchValidator};
