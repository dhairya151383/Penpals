import{j as G}from"./chunk-TRGRSSL6.js";import"./chunk-TL62S5XC.js";import"./chunk-THAV5HDO.js";import{a as W}from"./chunk-IWDVFKXM.js";import{c as A,e as h,f as N,g as V,i as j,j as q,k as R,p as D,r as U}from"./chunk-UL765BIR.js";import{Aa as O,Ca as S,Da as P,Ea as _,Fb as T,Gb as z,Na as E,O as C,Oa as a,P as b,Pa as L,bb as I,ca as x,ea as r,ha as f,ia as w,na as g,qa as s,qb as F,sa as M,vb as k,wa as n,xa as i,ya as d,za as y}from"./chunk-NOMZ4WY3.js";import{h as v}from"./chunk-MG3ERZGY.js";function J(t,o){t&1&&(n(0,"span"),a(1,"Email is required."),i())}function K(t,o){t&1&&(n(0,"span"),a(1,"Please enter a valid email address."),i())}function Q(t,o){if(t&1&&(n(0,"div",21),g(1,J,2,0,"span",22)(2,K,2,0,"span",22),i()),t&2){let l,e,m=_();r(),s("ngIf",(l=m.loginForm.get("email"))==null?null:l.hasError("required")),r(),s("ngIf",(e=m.loginForm.get("email"))==null?null:e.hasError("email"))}}function X(t,o){t&1&&(n(0,"span"),a(1,"Password is required."),i())}function Y(t,o){if(t&1&&(n(0,"div",21),g(1,X,2,0,"span",22),i()),t&2){let l,e=_();r(),s("ngIf",(l=e.loginForm.get("password"))==null?null:l.hasError("required"))}}function Z(t,o){t&1&&(y(0),a(1,"Sign in"),O())}function $(t,o){t&1&&d(0,"app-loading-spinner")}function ee(t,o){if(t&1&&(n(0,"div",21),a(1),i()),t&2){let l=_();r(),L(l.errorMessage)}}var B=class t{constructor(o,l,e){this.fb=o;this.authService=l;this.router=e}loginForm;isLoading=!1;errorMessage=null;ngOnInit(){this.loginForm=this.fb.group({email:["",[h.required,h.email]],password:["",h.required]})}onLogin(){return v(this,null,function*(){if(this.errorMessage=null,this.loginForm.markAllAsTouched(),!this.loginForm.valid){this.errorMessage="Please enter valid email and password.";return}this.isLoading=!0;let{email:o,password:l}=this.loginForm.value;try{yield this.authService.signInWithEmail(o,l),yield this.router.navigate(["/dashboard"])}catch(e){e.code==="auth/user-not-found"||e.code==="auth/wrong-password"?this.errorMessage="Invalid email or password. Please check your credentials.":e.code==="auth/invalid-email"?this.errorMessage="The email address is badly formatted.":e.code==="auth/too-many-requests"?this.errorMessage="Too many failed login attempts. Please try again later.":this.errorMessage=e.message||"Login failed. An unexpected error occurred.",console.error("Email/Password Login Error:",e)}finally{this.isLoading=!1}})}signInWithGoogle(){return v(this,null,function*(){this.isLoading=!0,this.errorMessage=null;try{yield this.authService.signInWithGoogle(),yield this.router.navigate(["/dashboard"])}catch(o){o.code==="auth/popup-closed-by-user"?this.errorMessage="Google login was cancelled.":o.code==="auth/cancelled-popup-request"?this.errorMessage="Another login popup was already open. Please try again.":this.errorMessage=o.message||"Google login failed. An unexpected error occurred.",console.error("Google Sign-in Error:",o)}finally{this.isLoading=!1}})}static \u0275fac=function(l){return new(l||t)(f(D),f(G),f(T))};static \u0275cmp=w({type:t,selectors:[["app-login"]],decls:40,vars:14,consts:[["loading",""],[1,"login-container"],[1,"left-panel"],["alt","Exam Illustration",1,"illustration",3,"src"],[1,"right-panel"],[1,"logo"],["src","assets/images/logo.jpg","alt","Logo"],[3,"ngSubmit","formGroup"],[1,"form-group"],["for","email"],["id","email","type","email","formControlName","email","placeholder","example@email.com"],["class","error",4,"ngIf"],["for","password"],["id","password","type","password","formControlName","password","placeholder","********"],["type","submit",3,"disabled"],[4,"ngIf","ngIfElse"],[1,"divider"],["type","button",1,"google-btn",3,"click","disabled"],["alt","Google Icon",3,"src"],[1,"register-text"],["routerLink","/register"],[1,"error"],[4,"ngIf"]],template:function(l,e){if(l&1){let m=S();n(0,"div",1)(1,"div",2),d(2,"img",3),n(3,"h1"),a(4,"Pen Pals"),i(),n(5,"p"),a(6,"This platform will offer an intuitive interface that allows writers to easily draft and publish their content, while enabling readers to discover, read, and engage with articles through comments."),i()(),n(7,"div",4)(8,"div",5),d(9,"img",6),n(10,"span")(11,"strong"),a(12,"PEN"),i(),a(13," PALS"),i()(),n(14,"form",7),P("ngSubmit",function(){return C(m),b(e.onLogin())}),n(15,"div",8)(16,"label",9),a(17,"User email"),i(),d(18,"input",10),g(19,Q,3,2,"div",11),i(),n(20,"div",8)(21,"label",12),a(22,"Password"),i(),d(23,"input",13),g(24,Y,2,1,"div",11),i(),n(25,"button",14),g(26,Z,2,0,"ng-container",15),i(),g(27,$,1,0,"ng-template",null,0,I),n(29,"div",16)(30,"span"),a(31,"or"),i()(),n(32,"button",17),P("click",function(){return C(m),b(e.signInWithGoogle())}),d(33,"img",18),a(34," Sign in with Google "),i(),n(35,"p",19),a(36," Are you new? "),n(37,"a",20),a(38,"Create an Account"),i()(),g(39,ee,2,1,"div",11),i()()()}if(l&2){let m,c,p,u,H=E(28);r(2),s("src","assets/images/login-illustration.jpg",x),r(12),s("formGroup",e.loginForm),r(4),M("invalid",((m=e.loginForm.get("email"))==null?null:m.invalid)&&((m=e.loginForm.get("email"))==null?null:m.touched)),r(),s("ngIf",((c=e.loginForm.get("email"))==null?null:c.invalid)&&((c=e.loginForm.get("email"))==null?null:c.touched)),r(4),M("invalid",((p=e.loginForm.get("password"))==null?null:p.invalid)&&((p=e.loginForm.get("password"))==null?null:p.touched)),r(),s("ngIf",((u=e.loginForm.get("password"))==null?null:u.invalid)&&((u=e.loginForm.get("password"))==null?null:u.touched)),r(),s("disabled",e.isLoading||e.loginForm.invalid),r(),s("ngIf",!e.isLoading)("ngIfElse",H),r(6),s("disabled",e.isLoading),r(),s("src","assets/icons/google.svg",x),r(6),s("ngIf",e.errorMessage)}},dependencies:[k,F,U,j,A,N,V,q,R,z,W],styles:['.login-container[_ngcontent-%COMP%]{display:flex;min-height:100vh;background-color:#f6fdf7;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.left-panel[_ngcontent-%COMP%]{flex:1;background-color:#dff6e4;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;text-align:center}.left-panel[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{max-width:80%;height:auto;margin-bottom:2rem}.left-panel[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;color:#1c2b2d;margin-bottom:1rem}.left-panel[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#444;max-width:400px}.right-panel[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;justify-content:center;padding:2rem 3rem;background-color:#f6fdf7}.logo[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:1.5rem;font-weight:500;color:#1c2b2d;margin-bottom:2rem}.logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:40px;height:40px}form[_ngcontent-%COMP%]{width:100%;max-width:400px;margin:0 auto}.form-group[_ngcontent-%COMP%]{margin-bottom:1.2rem}label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;font-weight:500;color:#333}input[_ngcontent-%COMP%]{width:100%;padding:.75rem;border:1px solid #ccc;border-radius:8px;font-size:1rem;transition:border .3s}input.invalid[_ngcontent-%COMP%]{border-color:#e74c3c}.error[_ngcontent-%COMP%]{color:#e74c3c;font-size:.875rem;margin-top:.25rem}.forgot-password[_ngcontent-%COMP%]{text-align:right;margin-bottom:1.5rem}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;font-size:.9rem;text-decoration:none}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#1c2b2d;color:#fff;border:none;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .3s}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#444;cursor:not-allowed}button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background-color:#000}.divider[_ngcontent-%COMP%]{text-align:center;margin:1.5rem 0;position:relative}.divider[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#f6fdf7;padding:0 1rem;color:#888;font-size:.9rem;position:relative;z-index:1}.divider[_ngcontent-%COMP%]:before{content:"";height:1px;background-color:#ccc;position:absolute;top:50%;left:0;right:0;z-index:0}.google-btn[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:.5rem;width:100%;padding:.75rem;background-color:#fff;border:1px solid #ccc;border-radius:8px;font-size:1rem;cursor:pointer;transition:background-color .3s}.google-btn[_ngcontent-%COMP%]:hover{background-color:#f0f0f0}.google-btn[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:20px;height:20px}.register-text[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem;font-size:.95rem;color:#333}.register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#4caf50;text-decoration:none;font-weight:500}.register-text[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}@media (max-width: 900px){.login-container[_ngcontent-%COMP%]{flex-direction:column}.left-panel[_ngcontent-%COMP%], .right-panel[_ngcontent-%COMP%]{flex:none;width:100%;padding:2rem}.left-panel[_ngcontent-%COMP%]{order:2}.right-panel[_ngcontent-%COMP%]{order:1}.left-panel[_ngcontent-%COMP%]   .illustration[_ngcontent-%COMP%]{max-width:60%}}']})};export{B as LoginComponent};
